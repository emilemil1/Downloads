let t,n,l,i=[],o=[],r=[],a=[],s=-1,d=[],m=new Set,c="date",u=null,h=null,f="descending",p=!1;const g=[{name:"m",width:320,size:":/thumbnails/0/c320x180_Crop/content"},{name:"l",width:640,size:":/thumbnails/0/c640x360_Crop/content"},{name:"h",width:1024,size:":/thumbnails/0/c1024x576_Crop/content"},{name:"",width:1600,size:"/content"}];let v,C,y,E,x,w,b,N,I,A,k,T,S,B,M,U,L,D,W,H,P,R,Q,z,F,O,J,Y,_,V,q,j,X,G,K,Z,$,ee,te,ne,le,ie=!1,oe=10,re=1,ae=1,se=!1,de=1,me=!1,ce=!0,ue=!1,he=!1,fe=!1,pe=window.mainHeight,ge=window.mainWidth,ve=window.viewport,Ce=window.rem;function ye(e){for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function Ee(){D.lastElementChild.style.filter="",D=void 0}function xe(e){e.target!==e.currentTarget&&e.target!==E||void 0===D||Je()}function we(e){if(D===e.currentTarget)return void Je();let t=e.currentTarget.data;void 0!==D?(Ee(),D=e.currentTarget,be(t)):(D=e.currentTarget,setTimeout(function(){be(t)},1e3,t)),x.setAttribute("willchange",""),W.removeEventListener("transitionend",ke),w.firstElementChild.setAttribute("active",""),L.textContent=t.name,L.parentElement.style.backgroundColor=vt(Oe(t.images[t.thumbnailIndex].dominantColor,52)),D.lastElementChild.style.filter="drop-shadow(0 0 0.4rem "+vt(Oe(t.images[t.thumbnailIndex].dominantColor,220))+")",lt(function(e){return i.findIndex(function(t){return t.date===e.date})+1}(e.currentTarget.data))}function be(e){let t=D,l="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(e.fullName)+":/children?select=audio,file,@content.downloadUrl";I.style.display="flex",fetch(l).then(e=>e.json()).then(function(e){if(void 0===D)return;n={files:[],images:[]};let l=[],i=[],o=0,r=0;for(item of e.value)item.file.mimeType.startsWith("audio")?(item.name=D.data.files[r].name,r++,l.push(item)):item.file.mimeType.startsWith("image")&&(item.name=D.data.images[o].name,o++,i.push(item));for(file of l)1===l.length?ze(file,"Nightcore"):ze(file);for(img of i)Fe(img);t===D&&(!function(){let e=document.createDocumentFragment(),t=document.createDocumentFragment(),l=0;for(file of n.files)e.appendChild(document.createElement("div")),e.lastElementChild.index=l,l++,Re(file,e.lastChild),e.lastElementChild.firstElementChild.onclick=Ne;for(image of(l=0,n.images))t.appendChild(document.createElement("div")),t.lastElementChild.index=l,l++,Qe(image,t.lastChild),t.lastElementChild.firstElementChild.onclick=Ne;0===n.files.length?(A.children[1].children[0].textContent="TRACKS - None Available",A.children[1].children[2].style.marginTop="1rem"):(A.children[1].children[0].textContent="TRACKS",A.children[1].children[2].style.marginTop="");0===n.images.length?A.children[1].children[2].textContent="IMAGES - None Available":A.children[1].children[2].textContent="IMAGES";let i=document.createElement("div");i.className="explorer-box-content",b.replaceChild(i,b.firstElementChild),i.appendChild(e),(i=document.createElement("div")).className="explorer-box-content",N.replaceChild(i,N.firstElementChild),i.appendChild(t)}(),I.style.display="none",explorerLoaded.style.display="block")})}function Ne(e){let t,l=e.currentTarget.parentElement;if(l.hasAttribute("active"))return l.removeAttribute("active"),_=void 0,void Te();l.setAttribute("active",""),void 0!==_&&(_.removeAttribute("active"),_=void 0),l.parentNode.parentNode.classList.contains("explorer-box-files")?t="file":l.parentNode.parentNode.classList.contains("explorer-box-images")&&(t="image"),_=l,function(e,t,l){x.setAttribute("darken",""),se=!1,""==P.style.opacity?Ae(!0):"flex"===J.style.display?(We(),"file"===t?setTimeout(function(){!1===se&&Ae(!0)},100):"image"===t&&setTimeout(function(){!1===se&&Ae(!0)},100)):"grid"===Y.style.display&&("image"===t?setTimeout(function(){!1===se&&Ae(!0)},100):"file"===t&&setTimeout(function(){!1===se&&Ae(!0)},100));if(W.style.opacity=1,W.style.pointerEvents="all","image"===t){let e=document.createElement("img"),t=_,i=function(){t===_&&"timeout"===H.note&&e.complete&&(H.src=e.src,H.downloadUrl=n.images[l].url,H.index=l,J.style.display="",Y.style.display="grid",P.style.transition="",P.style.opacity=0,se=!0,O.style.fontSize=.4*O.parentNode.offsetHeight+"px",Be())};e.onload=function(){i()},e.onerror=function(){},""===Y.style.display?setTimeout(function(){void 0!==_&&(H.note="timeout",i())},1e3):H.note="timeout",e.src=n.images[l].url}else"file"===t&&(q.firstElementChild.style.backgroundColor=vt(Oe(D.data.images[0].dominantColor,64)),fetch(n.files[l].url,{mode:"cors"}).then(function(e){return e.blob()}).then(function(t){R.src=URL.createObjectURL(t),R.type=n.files[l].type,Q.textContent=n.files[l].short,z.textContent=e.songName,R.downloadUrl=n.files[l].url,R.index=l,function(){Y.style.display="",P.style.transition="",P.style.opacity=0,J.style.display="flex",se=!0,F.offsetHeight<F.parentNode.offsetWidth?F.style.fontSize=.9*F.offsetHeight+"px":F.style.fontSize=.9*F.parentNode.offsetWidth+"px";V.firstElementChild.className="fas fa-play",Ue(!0),Be()}()}))}(D.data,t,l.index)}function Ie(e){e.target===e.currentTarget&&void 0!==_&&(_.removeAttribute("active"),_=void 0,Te())}function Ae(e=!1){P.style.opacity="",Be(),e||(Y.style.display="",J.style.display="")}function ke(){Ae(),W.removeEventListener("transitionend",ke)}function Te(){!1===R.paused&&We();W.addEventListener("transitionend",ke),x.removeAttribute("darken"),W.style.opacity=0,W.style.pointerEvents="",H.note=null}function Se(){let e=Oe(D.data.images[0].dominantColor,80);V.style.backgroundColor=vt(e)}function Be(){let e=Oe(D.data.images[0].dominantColor,64);V.style.backgroundColor=vt(e)}function Me(){let e=Math.round(R.currentTime/R.duration*Me.totalWidth);q.firstElementChild.style.width=e+"px",e===Me.totalWidth&&(V.firstElementChild.className="fas fa-play",q.firstElementChild.style.width="0px")}function Ue(e=!1){Me.totalWidth=parseInt(q.offsetWidth),e?q.firstElementChild.style.width="0px":(Me.currentWidth=Math.floor(R.currentTime/R.duration*Me.totalWidth),q.firstElementChild.style.width=Me.currentWidth+"px")}function Le(e){me=!0;let t=e.clientX,n=e.offsetX;q.firstElementChild.style.width=n+"px";let l=function(e){q.firstElementChild.style.width=Math.max(Math.min(e.clientX-t+n,Me.totalWidth),0)+"px",j.textContent=gt(Math.round(parseInt(q.firstElementChild.style.width)/Me.totalWidth*R.duration))};window.addEventListener("mousemove",l),l(e),window.addClickQueue(function(){me=!1,window.removeEventListener("mousemove",l);let e=parseInt(q.firstElementChild.style.width)/Me.totalWidth;!function(e){R.currentTime=e,q.firstElementChild.style.width=Math.round(R.currentTime/R.duration*Me.totalWidth)+"px"}(R.duration*e)},!0),e.stopPropagation()}function De(){"fas fa-play"===V.firstElementChild.className?(Ue(),0===R.currentTime||R.currentTime===R.duration?(R.volume=de,R.play()):function(){R.volume=0;let e=R.volume,t=de-R.volume,n=0;R.play();let l=setInterval(function(){R.volume=He(n,e,t,1),(n+=.02)>=1&&clearInterval(l)},10)}(),Se(),V.firstElementChild.className="fas fa-pause"):(0!==R.currentTime&&We(),Se(),V.firstElementChild.className="fas fa-play")}function We(){if(0===R.volume)return;let e=R.volume,t=0-e,n=0,l=setInterval(function(){R.volume=He(n,e,t,1),(n+=.02)>=1&&(clearInterval(l),R.pause())},10)}function He(e,t,n,l){return-n/2*(Math.cos(Math.PI*e/l)-1)+t}function Pe(){let e=document.createElement("a");"flex"===J.style.display?(e.href=R.downloadUrl,e.download=D.data.files[R.index].name):"grid"===Y.style.display&&(e.href=H.downloadUrl,e.download=D.data.images[H.index].name),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}function Re(e,t){let n=t;n.className="explorer-box-item",n.appendChild(document.createElement("div")),n.appendChild(document.createElement("div")),n.firstChild.className="explorer-box-item-title",n.firstChild.textContent=e.short,n.lastChild.className="item-options",n.lastChild.appendChild(document.createElement("i")),n.lastChild.firstChild.className="fas fa-ellipsis-v"}function Qe(e,t){let n=t;n.className="explorer-box-item",n.appendChild(document.createElement("div")),n.appendChild(document.createElement("div")),n.firstChild.className="explorer-box-item-title",n.firstChild.textContent=e.title,n.lastChild.className="item-options",n.lastChild.appendChild(document.createElement("i")),n.lastChild.firstChild.className="fas fa-ellipsis-v"}function ze(e,t=null){let l,i=e.name;l=null!==t?t:i.includes("(Extended) (Nightcore)")?"Extended Nightcore":i.includes("(Extended) (Original)")?"Extended Original":i.includes("(Nightcore)")?"Nightcore":i.includes("Video Edit")?"Video Edit":"Original";let o=e.file.mimeType,r=e["@content.downloadUrl"];n.files.push({title:i,short:l,url:r,type:o})}function Fe(e){let t=e.name,l=e.image,i=e["@content.downloadUrl"];n.images.push({title:t,resolution:l,url:i})}function Oe(e,t){let n=3*t/(e.r+e.g+e.b);return{r:Math.round(e.r*n),g:Math.round(e.g*n),b:Math.round(e.b*n)}}function Je(){Te(),x.removeAttribute("willchange"),w.firstElementChild.removeAttribute("notransition"),w.firstElementChild.removeAttribute("active"),L.parentElement.style.backgroundColor="rgb(26,26,26)",Ee(),setTimeout(function(){I.style.display="flex",explorerLoaded.style.display="none",b.replaceChild(document.createElement("div"),b.firstElementChild),N.replaceChild(document.createElement("div"),N.firstElementChild)},1e3),lt(it.prevSearch)}function Ye(e){let t=e.currentTarget,n=t.parentElement.parentElement.data,l="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(n.fullName)+"/"+encodeURIComponent(n.images[n.thumbnailIndex].name)+[v.size];t.src!==l&&(t.src=l)}function _e(e){if(81===e.currentTarget.naturalHeight)return void Ye(e);let t=e.currentTarget,n=t.parentElement.parentElement.data,l=vt(n.images[n.thumbnailIndex].dominantColorDark);if(n.gridItem.lastElementChild.style.backgroundColor=l,void 0!==t.shadow){if(s--,d.push(t),s<0)t.shadow=void 0;else if(0===s){for(t of d)t.shadow.style.opacity=0,t.style.opacity=1,t.shadow=void 0;s=-1}}else t.style.opacity=1}function Ve(){if("1"===W.style.opacity||-1!==s)return;s=a.length,d=[];for(let n=0;n<a.length;n++){let l=a[n];if(he&&!m.has(l))continue;let i,o=l.images,r=l.gridItem.lastElementChild.firstElementChild;"1"===r.style.opacity?i=l.gridItem.lastElementChild.lastElementChild:(i=r,r=l.gridItem.lastElementChild.lastElementChild),l.thumbnailIndex=(e=l.thumbnailIndex+1,t=Math.min(o.length,5),(e%t+t)%t);let s=l.thumbnailIndex;if(void 0===l.images[s].dominantColorDark){let e=l.images[s].dominantColor,t=96/(e.r+e.g+e.b);l.images[s].dominantColorDark={r:e.r*t,g:e.g*t,b:e.b*t}}i.shadow=r,void 0!==l.images[s].imgurId?i.src="https://i.imgur.com/"+l.images[s].imgurId+v.name+".jpg":i.src="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(l.fullName)+"/"+encodeURIComponent(l.images[l.thumbnailIndex].name)+[v.size]}var e,t}function qe(e,t){let n=e.name.toLowerCase(),l=t.name.toLowerCase();return result=n<l?-1:n>l?1:0,Xe.mod?result:-result}function je(e,t){return e.date<t.date?result=-1:e.date>t.date?result=1:result=0,Xe.mod?result:-result}function Xe(e){if(u===c&&h===f)return!1;let t,n=c.toLowerCase(),l=f.toLowerCase();return Xe.mod=!0,"descending"===l&&(Xe.mod=!1),"name"===n?t=qe:"date"===n&&(t=je),e.sort(t),u=c,h=f,!0}function Ge(){let e=((K=ge-6*Ce)-2)/(16/9)+2+70,t=2*(e+Ce),n=o.length;ie||(n=5);let l=M;l>le&&(l=0);let i=2*Ce+e*n+Ce*(n-1);Z=Math.max(l-U-t,0),$=Math.min(l+ve-14*Ce+t,i),ee=Math.floor(Z/i*n),te=Math.min(Math.floor($/i*n),n-1)}function Ke(){let e=ge-15*Ce-6*Ce,t=pe-3.5*Ce-2*Ce-6*Ce,n=16*Ce,l=1*Ce;if(he){ae=1,K=e=ge-6*Ce,re=5,oe=15;let t=o.length;ie||(t=5);let n=(K-2)/(16/9)+2+70;return void(le=Math.round(t*n+(t-1)*Ce+30*Ce-ve))}ae=Math.floor((e-n)/(n+l))+1;let i=.5625*((K=(e-(ae-1)*l)/ae)-6)+36+6,r=Math.max(Math.floor((t-i)/(i+l))+1,1);re=r*ae,oe=r*ae*3}function Ze(e){13==e.keyCode&&(T.blur(),e.preventDefault())}function $e(e){if(m.start===ee&&m.end===te)return;let t=[];for(let t=m.start;t<=m.end;t++)if(t<ee||t>te){let n=e[t].gridItem.lastElementChild.firstElementChild;m.delete(e[t]),n.removeAttribute("src"),n.style.opacity="",e[t].currImg=""}m.start=ee,m.end=te;for(let n=ee;n<=te;n++)""!==e[n].currImg&&void 0!==e[n].currImg||(m.add(e[n]),t.push(e[n]));for(folder of t){let e=folder.gridItem.lastElementChild.firstElementChild;void 0!==folder.images[folder.thumbnailIndex].imgurId?folder.currImg="https://i.imgur.com/"+folder.images[folder.thumbnailIndex].imgurId+v.name+".jpg":folder.currImg="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(folder.fullName)+"/"+encodeURIComponent(folder.images[folder.thumbnailIndex].name)+[v.size],""!=e.src&&void 0!==e.src||(e.src=folder.currImg)}}function et(e){v=K<g[0].width?g[0]:K<g[1].width?g[1]:K<g[2].width?g[2]:g[3];let t=-1;new Set;for(folder of m){let e=folder.gridItem.lastElementChild.firstElementChild;folder.currImg="",e.removeAttribute("src"),e.opacity=0}for(folder of(m.clear(),m.start=ee,m.end=te,e)){t++;let e=folder.gridItem.lastElementChild.firstElementChild;he&&(t<ee||t>te)?(folder.currImg="",e.removeAttribute("src"),e.opacity=0):(he&&m.add(folder),void 0!==folder.images[folder.thumbnailIndex].imgurId?folder.currImg="https://i.imgur.com/"+folder.images[folder.thumbnailIndex].imgurId+v.name+".jpg":folder.currImg="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(folder.fullName)+"/"+encodeURIComponent(folder.images[folder.thumbnailIndex].name)+[v.size],""!=e.src&&void 0!==e.src||(e.src=folder.currImg,e.complete&&void 0===et.firstSet&&(e.style.transition="opacity 0s",e.style.opacity=1,setTimeout(function(){e.style.transition=""},100))))}et.firstSet=!1}function tt(){let n=[],l=-o.length%ae;E.style.gridTemplateColumns="";for(let e=o.length;n.length<oe+l;e++){if(o.length===r.length){y.style.display="none";break}o.push(r[e]),n.push(r[e]),r[e].images.length>1&&a.push(r[e])}he?(Ke(),Ge(),$e(o)):et(o);let i=document.createDocumentFragment();for(e of n){if(!1===e.rgbset){let t=vt(e.images[0].dominantColorDark);e.gridItem.lastElementChild.style.backgroundColor=t}i.appendChild(e.gridItem)}E.appendChild(i),void 0!==t&&(clearInterval(t),s=-1),t=setInterval(Ve,7e3)}function nt(e,t){return!!e.name.toLowerCase().includes(t.toLowerCase())&&(!0!==p||void 0!==e.files)}function lt(e){let t=window.location.href,n=t;n=t.includes("index.html")?t.substring(0,t.indexOf("index.html")+10):t.substring(0,t.lastIndexOf("/")+1);let l="";""!==e&&(l+="s="+e+"&"),"date"!==c.toLowerCase()&&(l+="sb=name&"),"descending"!==f.toLowerCase()&&(l+="o=asc&"),!1!==p&&(l+="f=song&"),""!==l&&(n+=l="?"+l.substring(0,l.length-1)),url2=encodeURI(n),n!=t&&window.history.replaceState("","",n)}function it(n){if(!ie)return;lt(n);let l,d=function e(){let t=!1;return f!==e.orderBy?t=!0:c!==e.sortBy?t=!0:p!==e.filterSong&&(t=!0),e.orderBy=f,e.sortBy=c,e.filterSong=p,t}();Xe(i);let m=[];if(!isNaN(n)&&""!==n&&i.length>=parseInt(n))void 0===it.prevSearchData&&(ue=!0,T.value=i[parseInt(n)-1].name),m.push(i[parseInt(n)-1]);else{ue=!1,l=void 0!==it.prevSearch&&n.includes(it.prevSearch)&&!d?it.prevSearchData:i;for(let e of l)nt(e,n)&&m.push(e)}it.prevSearch=n,it.prevSearchData=m,function(n){for(folder of(r=n,o=[],n)){if(o.length===re)break;if(o.push(folder),!1===folder.rgbset){let e=vt(folder.images[0].dominantColorDark);folder.gridItem.lastElementChild.style.backgroundColor=e}}he&&(Ke(),Ge()),et(o),o.length<r.length?y.style.display="flex":y.style.display="none",a=[];for(let e of o)e.images.length>1&&a.push(e);0!==x.childElementCount&&(x.removeChild(E),E=document.createElement("div"),ne.observe(E,{childList:!0}),E.className="grid",x.insertBefore(E,y));let l=document.createDocumentFragment();for(e of o)l.appendChild(e.gridItem);if(dt.disabled=!0,E.appendChild(l),o.length<=3&&!1===he){let e=Math.min(3,re);E.style.gridTemplateColumns="repeat("+e+", 1fr)"}else E.style.gridTemplateColumns="";void 0!==t&&(clearInterval(t),s=-1),t=setInterval(Ve,7e3),!0===ue&&we({currentTarget:E.firstElementChild})}(m)}function ot(e){c=e,k.firstElementChild.textContent=c,function(e){let t=S.lastElementChild.firstElementChild.lastElementChild;"Name"===e?(t.children[0].textContent="A-Z",t.children[0].setAttribute("value","Ascending"),t.children[1].textContent="Z-A",t.children[1].setAttribute("value","Descending")):"Date"===e&&(t.children[0].textContent="Newest",t.children[0].setAttribute("value","Descending"),t.children[1].textContent="Oldest",t.children[1].setAttribute("value","Ascending"))}(c);let t=k.firstElementChild.getAttribute("index"),n=k.lastElementChild.firstElementChild.lastElementChild;n.children[t].removeAttribute("checked"),"Date"===c?(k.firstElementChild.setAttribute("index","0"),n.children[0].setAttribute("checked",""),rt("Descending")):"Name"===c&&(k.firstElementChild.setAttribute("index","1"),n.children[1].setAttribute("checked",""),rt("Ascending")),it(T.value)}function rt(e){f=e;let t=S.firstElementChild.getAttribute("index"),n=S.lastElementChild.firstElementChild.lastElementChild;n.children[t].removeAttribute("checked");let l=0;"Ascending"===f&&(l=1),"Name"===c&&(l=Math.abs(l-1)),S.firstElementChild.setAttribute("index",l),n.children[l].setAttribute("checked",""),S.firstElementChild.textContent=n.children[l].textContent,it(T.value)}function at(){void 0===at.interval&&(at.interval=setInterval(dt,50))}function st(e){if("show"===e&&!1===st.showing)st.showing=!0,U=0;else{if("hide"!==e||!0!==st.showing)return"fix"===e?(st.showing=!0,U=14*Ce,C.style.transition="initial",w.style.transition="initial",w.style.transform="",C.style.transform="",w.style.position="relative",C.style.position="relative",w.style.top="0rem",void(C.style.top="0rem")):void 0;st.showing=!1,U=14*Ce}w.style.top="",C.style.top="",w.style.transform="translateY("+-U+"px)",C.style.transform="translateY("+-U+"px)",setTimeout(function(){0===U&&(w.style.transform="",w.style.top="6rem",C.style.transform="",C.style.top="0px")},250)}function dt(e){if(!1===he||!0===dt.disabled)return;let t=document.documentElement.scrollTop;M<t&&(dt.trail+=3*(M-t)),t>14*Ce&&"relative"===w.style.position&&(w.style.top="",w.style.position="",C.style.position="",w.style.transform="translateY("+-U+"px)",C.style.transform="translateY("+-U+"px)",setTimeout(function(){C.style.transition="",w.style.transition=""},100)),0===t?dt.trail=t+42*Ce:t<=14*Ce&&!1===st.showing||(dt.trail>t+42*Ce?(dt.trail=t+42*Ce,st("show")):dt.trail<t-42*Ce&&(dt.trail=t-42*Ce)),M===t&&(clearInterval(at.interval),at.interval=void 0),M=t,ct(),dt.folderCount===o.length?(Ge(),$e(o)):dt.folderCount=o.length}function mt(e){ct()}function ct(){void 0!==ct.handler&&(clearTimeout(ct.handler),ct.handler=void 0),ct.handler=setTimeout(ut,500)}function ut(){ct.handler=void 0,localStorage.setItem("scrollPosition",Math.max(M-U,0))}function ht(e){if(volumeSlider.parentNode.hasAttribute("active2")||!0===ht.skip)return void(ht.skip=!1);let t=function(){volumeSlider.onmousedown="",volumeSlider.parentNode.removeAttribute("active2")};window.addClickQueue(t,!0),volumeSlider.onmousedown=function(e){window.removeClickQueue(t);window.addClickQueue(function(e){let n=parseFloat(volumeSlider.offsetHeight),l=Math.max(Math.min(n+(volumeSlider.rect.top-104-e.y),n),0)/n;ft(l),localStorage.setItem("volume",l),volumeSlider.rect.left<=e.x&&e.x<=volumeSlider.rect.right&&volumeSlider.rect.top-104<=e.y&&e.y<=volumeSlider.rect.bottom&&(ht.skip=!0),window.addClickQueue(t,!0),window.onmousemove=""},!0),window.onmousemove=pt;let n=parseFloat(volumeSlider.offsetHeight);ft(Math.max(Math.min(n+(volumeSlider.rect.top-104-e.y),n),0)/n)},volumeSlider.rect=volumeSlider.getBoundingClientRect(),volumeSlider.parentNode.setAttribute("active2",""),e.stopPropagation()}function ft(e){de=e,R.volume=e,G.textContent=Math.round(100*R.volume)+"%",volumeSlider.firstElementChild.style.height=100*R.volume+"%",volumeSlider.parentNode.firstElementChild.className=de>.35?"fas fa-volume-up":de>0?"fas fa-volume-down":"fas fa-volume-off"}function pt(e){let t=parseFloat(volumeSlider.offsetHeight);ft(Math.max(Math.min(t+(volumeSlider.rect.top-104-e.y),t),0)/t)}function gt(e){let t=Math.floor(e/60);return(e%=60)<10&&(e="0"+e),t+":"+e}function vt(e){return"rgb("+e.r+","+e.g+","+e.b+")"}function Ct(e){if(void 0!==l)return void 0!==e?e&&e in l?l[e]:{}:l;l={};let t=decodeURIComponent(window.location.href.slice(window.location.href.indexOf("?")+1));return t===decodeURIComponent(window.location.href)?e&&e in l?l[e]:l:(t.split("&").forEach(function(e){let t=e.split("=",2);l[t[0]]=t[1]}),void 0!==e?e&&e in l?l[e]:{}:l)}function yt(){let e=Ct(),t=e.sb,n=e.o,l=e.f,i=e.s;ye(l)||"song"===l&&(p=!0,B.setAttribute("checked","")),ye(t)?ot("Date"):"name"===t?ot("Name"):"date"===t&&ot("Date"),ye(n)?rt("Descending"):"asc"===n?rt("Ascending"):"desc"===n&&rt("Descending"),ye(i)||(document.getElementsByClassName("search-field")[0].value=i)}function Et(e){let t=function(){let e=document.createDocumentFragment();e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),e.childNodes[0].className="image-bar",e.childNodes[1].className="sixteenbynine";let t=e.childNodes[1];return t.appendChild(document.createElement("img")),t.childNodes[0].className="gallery-image",(t=e.childNodes[0]).appendChild(document.createElement("span")),t.childNodes[0].className="image-title",e}(),n=function(){let e=document.createDocumentFragment();return e.appendChild(document.createElement("img")),e.childNodes[0].className="gallery-image",e}();for(let l of e){let e=t.cloneNode(!0);e.lastElementChild.firstElementChild.onload=_e,e.lastElementChild.firstElementChild.onerror=Ye,e.firstElementChild.firstElementChild.textContent=l.name;let o=l.images[0].dominantColor,r=96/(o.r+o.g+o.b);for(img of(l.images[0].dominantColorDark={r:o.r*r,g:o.g*r,b:o.b*r},l.fullName=l.name,void 0!==l.suffix&&(l.fullName+=" - "+l.suffix),l.thumbnailIndex=0,1!=l.images.length&&(e.childNodes[1].appendChild(n.cloneNode(!0)),e.childNodes[1].childNodes[e.childNodes.length-1].onload=_e,e.childNodes[1].childNodes[e.childNodes.length-1].onerror=Ye,e.childNodes[1].childNodes[e.childNodes.length-1].style.opacity=0),l.images))img.name.startsWith("§")&&(img.name=l.name+img.name.substring(1));if(void 0!==l.files)for(file of l.files)file.name.startsWith("§")&&(file.name=l.name+file.name.substring(1));l.gridItem=document.createElement("div"),l.gridItem.onclick=we,l.gridItem.className="grid-item",l.gridItem.appendChild(e),l.gridItem.data=l,l.rgbset=!1,i.push(l)}}function xt(e){let t=e.currentTarget;he&&(t=t.lastElementChild),t.hasAttribute("checked")?t.removeAttribute("checked"):t.setAttribute("checked",""),"filtersong-select"===t.getAttribute("id")&&(p=t.hasAttribute("checked"),it(T.value))}function wt(e){if(he){let t=e.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement;t.setAttribute("noactive",""),window.onmouseup=function(){t.removeAttribute("noactive"),window.onmouseup=null}}}function bt(e){let t=e.currentTarget.parentElement.parentElement.parentElement.parentElement,n=e.currentTarget.getAttribute("value");t.removeAttribute("active"),t.firstElementChild.textContent!==e.currentTarget.textContent?("order-select"===t.getAttribute("id")?rt(n):"sort-select"===t.getAttribute("id")&&ot(n),e.stopPropagation()):e.stopPropagation()}function Nt(e){let t=e.currentTarget;if(he&&(t=t.lastElementChild),t.hasAttribute("active"))return t.removeAttribute("active"),setTimeout(function(){t.hasAttribute("active")||(w.firstElementChild.setAttribute("willchange",""),t.removeAttribute("willchange"))},500),void e.stopPropagation();w.firstElementChild.removeAttribute("willchange"),t.setAttribute("active",""),t.setAttribute("hover",""),fe=!0,window.addClickQueue(function(e){let n=e.target;he&&"option"!==n.className?n=n.parentElement.lastElementChild:he&&(n=n.lastElementChild),n!==t&&(fe=!1,t.removeAttribute("active"),setTimeout(function(){t.hasAttribute("active")||(fe||w.firstElementChild.setAttribute("willchange",""),t.removeAttribute("willchange"))},500))},!0),e.stopPropagation()}function It(e){e.target===e.currentTarget&&(e.currentTarget.setAttribute("willchange",""),e.currentTarget.removeAttribute("hover"),e.currentTarget.parentElement.setAttribute("noactive",""))}function At(e){e.currentTarget.hasAttribute("active")||e.currentTarget.removeAttribute("willchange")}function kt(){let e=window.matchMedia("(max-width: 1135px)"),t=function(e){(he=e.matches)?(B.parentElement.onclick=xt,S.parentElement.onmouseover=null,S.parentElement.onmouseout=null,S.parentElement.onclick=Nt,k.parentElement.onmouseover=null,k.parentElement.onmouseout=null,k.parentElement.onclick=Nt,B.onclick=null,S.onmouseover=null,S.onmouseout=null,S.onclick=null,k.onmouseover=null,k.onmouseout=null,k.onclick=null,window.addEventListener("scroll",dt,{passive:!1}),window.removeEventListener("scroll",mt),setInterval(function(){let e=-1,t="";for(folder of o)(++e<ee||e>te)&&""!==folder.currImg&&(t+=" "+e)},1e3)):(B.parentElement.onclick=null,S.parentElement.onmouseover=null,S.parentElement.onmouseout=null,S.parentElement.onclick=null,k.parentElement.onmouseover=null,k.parentElement.onmouseout=null,k.parentElement.onclick=null,B.onclick=xt,S.onmouseover=It,S.onmouseout=At,S.onclick=Nt,k.onmouseover=It,k.onmouseout=At,k.onclick=Nt,window.addEventListener("scroll",mt,{passive:!0}),window.removeEventListener("scroll",dt),window.ontouchmove=null,w.style.transform="",C.style.transform="")};t(e),e.addListener(t)}window.preload2=new Promise(function(e){x=document.getElementsByClassName("main")[0],T=document.getElementsByClassName("search-field")[0],S=document.getElementById("order-select"),k=document.getElementById("sort-select"),B=document.getElementById("filtersong-select"),A=document.getElementsByClassName("explorer")[0],b=document.getElementsByClassName("explorer-box-files")[0],N=document.getElementsByClassName("explorer-box-images")[0],I=document.getElementsByClassName("explorer-loading")[0],explorerLoaded=document.getElementsByClassName("explorer-loaded")[0],E=x.firstElementChild,y=x.lastElementChild,w=document.getElementsByClassName("sidebar")[0],L=document.getElementsByClassName("return-title")[0],W=document.getElementsByClassName("highlight")[0],H=document.getElementsByClassName("highlight-image")[0],P=document.getElementsByClassName("highlight-load")[0],Y=document.getElementsByClassName("highlight-image-container")[0],R=document.getElementsByClassName("highlight-song")[0],J=document.getElementsByClassName("highlight-song-container")[0],V=document.getElementsByClassName("audio-controls-play")[0],q=document.getElementsByClassName("audio-controls-progress")[0],j=document.getElementsByClassName("audio-controls-progress-elapsed")[0],X=document.getElementsByClassName("audio-controls-progress-total")[0],Q=document.getElementsByClassName("highlight-song-overlay-type")[0],z=document.getElementsByClassName("highlight-song-overlay-title")[0],F=document.getElementsByClassName("highlight-song-overlay-download")[0],O=document.getElementsByClassName("highlight-image-overlay-download")[0],volumeSlider=document.getElementsByClassName("audio-controls-volume-sliderbg")[0],G=document.getElementsByClassName("audio-controls-volume-text")[0],C=document.getElementsByClassName("header")[0],yt(),function(){window.onresize=function(){if(he)return pe=document.documentElement.scrollHeight,ge=document.documentElement.scrollWidth,ve=document.documentElement.clientHeight,Ke(),void Ge();Ce=parseFloat(getComputedStyle(document.documentElement).fontSize),pe=document.documentElement.scrollHeight,ge=document.documentElement.scrollWidth,ve=document.documentElement.clientHeight,Ke(),Ge(),et(o),Ue(),"flex"===J.style.display&&(F.offsetHeight<F.parentNode.offsetWidth?F.style.fontSize=.9*F.offsetHeight+"px":F.style.fontSize=.9*F.parentNode.offsetWidth+"px"),"grid"===Y.style.display&&(O.style.fontSize=.4*O.parentNode.offsetHeight+"px"),volumeSlider.rect=volumeSlider.getBoundingClientRect()},x.onclick=xe,O.onclick=Pe,F.onclick=Pe,W.onmousedown=Ie,V.onmouseover=Se,V.onmouseout=Be,V.onclick=De,q.onmousedown=Le,volumeSlider.onclick=ht,L.parentElement.children[1].onclick=Je,A.lastElementChild.onclick=Ie;let e=document.getElementsByClassName("option-dropdown-item");for(let t=0;t<e.length;t++)e.item(t).onclick=bt,e.item(t).onmousedown=wt;y.firstElementChild.firstElementChild.onclick=function(){tt()},T.oninput=function(e){it(T.value)},T.style.transition="outline 0.15s ease",requestAnimationFrame(function(){B.removeAttribute("noanim")}),window.clickQueue=[],window.onmouseup=function(e){for(let t=clickQueue.length-1;t>=0;t--)clickQueue[t].func(e),!0===clickQueue[t].once&&clickQueue.splice(t,1)},window.addClickQueue=function(e,t="false"){window.clickQueue.push({func:e,once:t})},window.removeClickQueue=function(e){for(let t=clickQueue.length-1;t>=0;t--)if(clickQueue[t].func===e){clickQueue.splice(t,1);break}},R.ontimeupdate=function(e){me||(Me(),j.textContent=gt(Math.round(R.currentTime)))},R.onloadedmetadata=function(e){X.textContent=gt(Math.round(R.duration))};let t=document.createElement("div");""!==t.style.clipPath?ce=!1:(t.style.clipPath="polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%, 0px 0px, 2px 2px, 2px calc(100% - 2px), calc(100% - 2px) calc(100% - 2px), calc(100% - 2px) 2px, 2px 2px)","polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%, 0px 0px, 2px 2px, 2px calc(100% - 2px), calc(100% - 2px) calc(100% - 2px), calc(100% - 2px) 2px, 2px 2px)"!==t.style.clipPath&&(ce=!1)),null===(M=localStorage.getItem("scrollPosition"))&&(M=0),dt.trail=parseInt(M)+42*Ce,st.showing=!0,U=0,T.onkeydown=Ze,ne=new MutationObserver(function(e,t){for(let t of e)"childList"==t.type&&t.addedNodes.length>0&&(M>le&&o.length<=re&&(M=0,st("show"),dt.trail=42*Ce),document.documentElement.scrollTop=M,dt.disabled=!1)}),window.ontouchend=st}(),kt(),Ke(),function(){let e=localStorage.getItem("volume");ft(null!==e?e:.5)}(),e("loaded")}),document.addEventListener("DOMContentLoaded",async function(){await Promise.all([window.preload,window.preload2]),Et(window.folders),clearTimeout(window.spinAdd),document.getElementById("spinner").remove(),ie=!0;let e=Ct("s");ye(e)?it(""):it(e)});
