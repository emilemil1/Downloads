let t,n,l,i=[],o=[],r=[],d=[],a=[],s="date",m=null,c=null,u="descending",h=!1;const f=[{name:"m",width:320,size:":/thumbnails/0/c320x180_Crop/content"},{name:"l",width:640,size:":/thumbnails/0/c640x360_Crop/content"},{name:"",width:1600,size:"/content"}];let g,p,C,y,v,E,x,b,N,w,I,k,A,T,S,B,M,L,U,D,W,R,Q,F,H,z,O,P,J,q,V,_,j,X,Y,G=!1,K=10,Z=1,$=1,ee=!1,te=!1,ne=1,le=!1,ie=!0,oe=!1,re=window.mainHeight,de=window.rem;function ae(e){for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function se(){L.style.filter="",L=void 0}function me(e){e.target!==e.currentTarget&&e.target!==E||void 0===L||Le()}function ce(e){if(L===e.currentTarget)return void Le();let t=e.currentTarget.data;void 0!==L?(se(),L=e.currentTarget,ue(t)):(L=e.currentTarget,setTimeout(function(){ue(t)},1e3,t)),D.removeEventListener("transitionend",pe),b.firstElementChild.style.transform="translateX(-50%)",M.textContent=t.name,M.parentElement.style.backgroundColor=et(Me(t.images[t.thumbnailIndex].dominantColor,52)),L.style.filter="drop-shadow(0 0 0.4rem "+et(Me(t.images[t.thumbnailIndex].dominantColor,220))+")",Ve(function(e){return i.findIndex(function(t){return t.date===e.date})+1}(e.currentTarget.data))}function ue(e){let t=L,l="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(e.fullName)+":/children?select=audio,file,@content.downloadUrl";I.style.visibility="visible",fetch(l).then(e=>e.json()).then(function(e){n={files:[],images:[]};let l=[],i=[],o=0,r=0;for(item of e.value)item.file.mimeType.startsWith("audio")?(item.name=L.data.files[r].name,r++,l.push(item)):item.file.mimeType.startsWith("image")&&(item.name=L.data.images[o].name,o++,i.push(item));for(file of l)1===l.length?Se(file,"Nightcore"):Se(file);for(img of i)Be(img);t===L&&(!function(){let e=document.createDocumentFragment(),t=document.createDocumentFragment(),l=0;for(file of n.files)e.appendChild(document.createElement("div")),e.lastElementChild.index=l,l++,Ae(file,e.lastChild),e.lastElementChild.firstElementChild.onclick=he;for(image of(l=0,n.images))t.appendChild(document.createElement("div")),t.lastElementChild.index=l,l++,Te(image,t.lastChild),t.lastElementChild.firstElementChild.onclick=he;0===n.files.length?(k.children[1].children[0].textContent="TRACKS - None Available",k.children[1].children[2].style.marginTop="1rem"):(k.children[1].children[0].textContent="TRACKS",k.children[1].children[2].style.marginTop="");0===n.images.length?k.children[1].children[2].textContent="IMAGES - None Available":k.children[1].children[2].textContent="IMAGES";let i=document.createElement("div");i.className="explorer-box-content",N.replaceChild(i,N.firstElementChild),i.appendChild(e),(i=document.createElement("div")).className="explorer-box-content",w.replaceChild(i,w.firstElementChild),i.appendChild(t)}(),I.style.visibility="hidden")})}function he(e){let t,l=e.currentTarget.parentElement;if(l.hasAttribute("active"))return l.removeAttribute("active"),q=void 0,void Ce();l.setAttribute("active",""),void 0!==q&&(q.removeAttribute("active"),q=void 0),l.parentNode.parentNode.classList.contains("explorer-box-files")?t="file":l.parentNode.parentNode.classList.contains("explorer-box-images")&&(t="image"),q=l,function(e,t,l){x.style.filter=ie?"blur(0.5rem) brightness(30%)":"brightness(30%)";te=!1,""==R.style.opacity?ge(!0):"flex"===P.style.display?(we(),"file"===t?setTimeout(function(){!1===te&&ge(!0)},100):"image"===t&&setTimeout(function(){!1===te&&ge(!0)},100)):"grid"===J.style.display&&("image"===t?setTimeout(function(){!1===te&&ge(!0)},100):"file"===t&&setTimeout(function(){!1===te&&ge(!0)},100));if(D.style.opacity=1,D.style.pointerEvents="all","image"===t){let e=document.createElement("img"),t=q,i=function(){t===q&&"timeout"===W.note&&e.complete&&(W.src=e.src,W.downloadUrl=n.images[l].url,W.index=l,P.style.display="",J.style.display="grid",R.style.transition="",R.style.opacity=0,te=!0,O.style.fontSize=.4*O.parentNode.offsetHeight+"px",ve())};e.onload=function(){i()},e.onerror=function(){},""===J.style.display?setTimeout(function(){void 0!==q&&(W.note="timeout",i())},1e3):W.note="timeout",e.src=n.images[l].url}else"file"===t&&(_.firstElementChild.style.backgroundColor=et(Me(L.data.images[0].dominantColor,64)),fetch(n.files[l].url,{mode:"cors"}).then(function(e){return e.blob()}).then(function(t){Q.src=URL.createObjectURL(t),Q.type=n.files[l].type,F.textContent=n.files[l].short,H.textContent=e.songName,Q.downloadUrl=n.files[l].url,Q.index=l,function(){J.style.display="",R.style.transition="",R.style.opacity=0,P.style.display="flex",te=!0,z.offsetHeight<z.parentNode.offsetWidth?z.style.fontSize=.9*z.offsetHeight+"px":z.style.fontSize=.9*z.parentNode.offsetWidth+"px";V.firstElementChild.className="fas fa-play",clearInterval(Q.progressMeter),xe(!0),ve()}()}))}(L.data,t,l.index)}function fe(e){e.target===e.currentTarget&&void 0!==q&&(q.removeAttribute("active"),q=void 0,Ce())}function ge(e=!1,t=!1){if(t){let e=function(){R.style.transition="",R.removeEventListener("transitionend",e)};R.addEventListener("transitionend",e),R.style.transition="opacity 0.5s"}R.style.opacity="",ve(),e||(J.style.display="",P.style.display="")}function pe(){ge(),D.removeEventListener("transitionend",pe)}function Ce(){we();D.addEventListener("transitionend",pe),x.style.filter="",D.style.opacity=0,D.style.pointerEvents="",W.note=null}function ye(){if(void 0===L)return;let e=Me(L.data.images[0].dominantColor,80);V.style.backgroundColor=et(e)}function ve(){if(void 0===L)return;let e=Me(L.data.images[0].dominantColor,64);V.style.backgroundColor=et(e)}function Ee(){let e=Math.round(Q.currentTime/Q.duration*Ee.totalWidth);_.firstElementChild.style.width=e+"px",e===Ee.totalWidth&&(V.firstElementChild.className="fas fa-play",_.firstElementChild.style.width="0px")}function xe(e=!1){Ee.totalWidth=parseInt(_.offsetWidth),e?_.firstElementChild.style.width="0px":(Ee.currentWidth=Math.floor(Q.currentTime/Q.duration*Ee.totalWidth),_.firstElementChild.style.width=Ee.currentWidth+"px")}function be(e){le=!0,clearInterval(Q.progressMeter);let t=e.clientX,n=e.offsetX;_.firstElementChild.style.width=n+"px";let l=function(e){_.firstElementChild.style.width=Math.max(Math.min(e.clientX-t+n,Ee.totalWidth),0)+"px",j.textContent=Ze(Math.round(parseInt(_.firstElementChild.style.width)/Ee.totalWidth*Q.duration))};window.addEventListener("mousemove",l),l(e),window.addClickQueue(function(){le=!1,Q.paused||(Q.progressMeter=setInterval(Ee,100)),window.removeEventListener("mousemove",l);let e=parseInt(_.firstElementChild.style.width)/Ee.totalWidth;!function(e){Q.currentTime=e,_.firstElementChild.style.width=Math.round(Q.currentTime/Q.duration*Ee.totalWidth)+"px"}(Q.duration*e)},!0),e.stopPropagation()}function Ne(){"fas fa-play"===V.firstElementChild.className?(xe(),0===Q.currentTime||Q.currentTime===Q.duration?(Q.volume=ne,Q.play()):function(){Q.volume=0;let e=Q.volume,t=ne-Q.volume,n=0;Q.play();let l=setInterval(function(){Q.volume=Ie(n,e,t,1),(n+=.02)>=1&&clearInterval(l)},10)}(),ye(),V.firstElementChild.className="fas fa-pause"):(0!==Q.currentTime&&we(),ye(),V.firstElementChild.className="fas fa-play")}function we(){if(0===Q.volume)return;let e=Q.volume,t=0-e,n=0,l=setInterval(function(){Q.volume=Ie(n,e,t,1),(n+=.02)>=1&&(clearInterval(l),clearInterval(Q.progressMeter),Q.pause(),clearInterval(Q.progressMeter))},10)}function Ie(e,t,n,l){return-n/2*(Math.cos(Math.PI*e/l)-1)+t}function ke(){let e=document.createElement("a");e.href=W.downloadUrl,"flex"===P.style.display?e.download=L.data.files[Q.index].name:"grid"===J.style.display&&(e.download=L.data.images[W.index].name),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}function Ae(e,t){let n=t;n.className="explorer-box-item",n.appendChild(document.createElement("div")),n.appendChild(document.createElement("div")),n.firstChild.className="explorer-box-item-title",n.firstChild.textContent=e.short,n.lastChild.className="item-options",n.lastChild.appendChild(document.createElement("i")),n.lastChild.firstChild.className="fas fa-ellipsis-v"}function Te(e,t){let n=t;n.className="explorer-box-item",n.appendChild(document.createElement("div")),n.appendChild(document.createElement("div")),n.firstChild.className="explorer-box-item-title",n.firstChild.textContent=e.title,n.lastChild.className="item-options",n.lastChild.appendChild(document.createElement("i")),n.lastChild.firstChild.className="fas fa-ellipsis-v"}function Se(e,t=null){let l,i=e.name;l=null!==t?t:i.includes("(Extended) (Nightcore)")?"Extended Nightcore":i.includes("(Extended) (Original)")?"Extended Original":i.includes("(Nightcore)")?"Nightcore":i.includes("Video Edit")?"Video Edit":"Original";let o=e.file.mimeType,r=e["@content.downloadUrl"];n.files.push({title:i,short:l,url:r,type:o})}function Be(e){let t=e.name,l=e.image,i=e["@content.downloadUrl"];n.images.push({title:t,resolution:l,url:i})}function Me(e,t){let n=3*t/(e.r+e.g+e.b);return{r:Math.round(e.r*n),g:Math.round(e.g*n),b:Math.round(e.b*n)}}function Le(){b.firstElementChild.style.transition="",Ce(),b.firstElementChild.style.transform="",M.parentElement.style.backgroundColor="rgb(26,26,26)",se(),setTimeout(function(){I.style.visibility="visible",N.replaceChild(document.createElement("div"),N.firstElementChild),w.replaceChild(document.createElement("div"),w.firstElementChild)},1e3),Ve(_e.prevSearch)}function Ue(e){U=e.currentTarget;let t=e.currentTarget,n=t.firstElementChild.firstElementChild,l=t.firstElementChild.lastElementChild,i=t.data,o=et(Me(i.images[i.thumbnailIndex].dominantColor,64)),r=function(){n.style.transition="background-color 2s",l.style.transition="background-color 2s",n.removeEventListener("transitionend",r)};n.addEventListener("transitionend",r),n.style.transition="background-color 0.15s",l.style.transition="background-color 0.15s",n.style.backgroundColor=o,l.style.backgroundColor=o}function De(e){U===e.currentTarget&&(U=void 0);let t=e.currentTarget,n=t.firstElementChild.firstElementChild,l=t.firstElementChild.lastElementChild,i=t.data,o=et(i.images[i.thumbnailIndex].dominantColorDark),r=function(){n.style.backgroundColor===o&&(n.style.transition="background-color 2s",l.style.transition="background-color 2s"),n.removeEventListener("transitionend",r)};n.addEventListener("transitionend",r),n.style.transition="background-color 0.15s",l.style.transition="background-color 0.15s",n.style.backgroundColor=o,l.style.backgroundColor=o}function We(e){let t=e.currentTarget,n=t.parentElement.parentElement.data,l="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(n.fullName)+"/"+encodeURIComponent(n.images[n.thumbnailIndex].name)+[g.size];t.src!==l&&(t.src=l)}function Re(e){if(81===e.currentTarget.naturalHeight)return void We(e);let t=e.currentTarget,n=t.parentElement.parentElement.data,l=et(n.images[n.thumbnailIndex].dominantColorDark);n.gridItem.firstElementChild.firstElementChild.style.backgroundColor=l,n.gridItem.firstElementChild.lastElementChild.style.backgroundColor=l,n.gridItem.lastElementChild.style.backgroundColor=l,void 0!==t.shadow&&(t.shadow.style.opacity=0,n.currImg=t.src,t.shadow=void 0),t.style.opacity=1}function Qe(){if(void 0!==L)return;for(let n=0;n<d.length;n++){let l=d[n];if(l.gridItem===U)continue;let i,o=l.images,r=l.gridItem.lastElementChild.firstElementChild;"1"===r.style.opacity?i=l.gridItem.lastElementChild.lastElementChild:(i=r,r=l.gridItem.lastElementChild.lastElementChild),l.thumbnailIndex=(e=l.thumbnailIndex+1,t=Math.min(o.length,5),(e%t+t)%t);let a=l.thumbnailIndex;if(void 0===l.images[a].dominantColorDark){let e=l.images[a].dominantColor,t=96/(e.r+e.g+e.b);l.images[a].dominantColorDark={r:e.r*t,g:e.g*t,b:e.b*t}}i.shadow=r,void 0!==l.images[a].imgurId?i.src="https://i.imgur.com/"+l.images[a].imgurId+g.name+".jpg":i.src="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(l.fullName)+"/"+encodeURIComponent(l.images[l.thumbnailIndex].name)+[g.size]}var e,t}function Fe(e,t){let n=e.name.toLowerCase(),l=t.name.toLowerCase();return result=n<l?-1:n>l?1:0,ze.mod?result:-result}function He(e,t){return e.date<t.date?result=-1:e.date>t.date?result=1:result=0,ze.mod?result:-result}function ze(e){if(m===s&&c===u)return!1;let t,n=s.toLowerCase(),l=u.toLowerCase();return ze.mod=!0,"descending"===l&&(ze.mod=!1),"name"===n?t=Fe:"date"===n&&(t=He),e.sort(t),m=s,c=u,!0}function Oe(e){let t=document.body.getBoundingClientRect().width-15*de-6*de,n=document.body.getBoundingClientRect().height-3.5*de-2*de;$=Math.floor((t-16*de)/(17*de))+1;let l=Math.max(Math.min($,folders.length,e),3);p=(t-de*(l-1))/l,f[0].width=(t-de*($-1))/$,C=p<=f[0].width||!1===ie?p/(16/9)+43:(p-4)/(16/9)+4;let i=Math.max(Math.floor((n-9*de)/C),1);Z=i*$,K=i*$*3;let r=o.length;0===o.length&&(r=Z);let d=Math.ceil(r/$);y=C*d+1*de*(d-1),r<e&&(y+=6*de)}function Pe(){let e=p,t=[];for(folder of o)t.push(folder.gridItem.lastElementChild),t.push(folder.gridItem.firstElementChild),t.push(folder.gridItem.firstElementChild.firstElementChild);if(0!==o.length){for(folder of(e>f[0].width?(g=f[1],t.forEach(e=>{e.classList.remove("reduced")})):(g=f[0],t.forEach(e=>{e.classList.add("reduced")})),o))if(folder.gridItem.style.width!==p&&(folder.gridItem.style.width=p+"px"),folder.gridItem.style.height!==C&&(folder.gridItem.style.height=C+"px"),void 0!==folder.images[folder.thumbnailIndex].imgurId?folder.currImg="https://i.imgur.com/"+folder.images[folder.thumbnailIndex].imgurId+g.name+".jpg":folder.currImg="https://api.onedrive.com/v1.0/shares/s!AqeaU-N5JvJ_gYJLVTUOUyNy1NFPHA/root:/"+encodeURIComponent(folder.fullName)+"/"+encodeURIComponent(folder.images[folder.thumbnailIndex].name)+[g.size],folder.gridItem.lastElementChild.firstElementChild.src!==folder.currImg){let e=folder.gridItem.lastElementChild.firstElementChild;if(""===e.src)e.src=folder.currImg,e.complete&&(e.style.opacity=1);else{let t=new Image,n=folder;t.onload=function(){t.src===n.currImg&&(e.src=n.currImg)},t.src=n.currImg}}Math.floor(y)>re&&v.firstElementChild.style.marginLeft!==scrollBarWidth/4+"px"?v.firstElementChild.style.marginLeft=scrollBarWidth+"px":Math.floor(y)<=re&&""!==v.firstElementChild.style.marginLeft&&(v.firstElementChild.style.marginLeft=""),o.length<3?E.style.gridTemplateColumns="repeat(3, 1fr)":E.style.gridTemplateColumns=""}}function Je(){let t=[],n=-o.length%$;for(let e=o.length;t.length<K+n;e++){if(o.length===r.length){v.style.display="none";break}o.push(r[e]),t.push(r[e]),r[e].images.length>1&&d.push(r[e])}let l=document.createDocumentFragment();for(e of t){if(!1===e.rgbset){let t=et(e.images[0].dominantColorDark);e.gridItem.firstElementChild.firstElementChild.style.backgroundColor=t,e.gridItem.firstElementChild.lastElementChild.style.backgroundColor=t,e.gridItem.lastElementChild.style.backgroundColor=t}l.appendChild(e.gridItem)}!1===ee&&(ee=!0,Oe(o.length)),E.appendChild(l),Pe()}function qe(e,t){return!!e.name.toLowerCase().includes(t.toLowerCase())&&(!0!==h||void 0!==e.files)}function Ve(e){let t=window.location.href,n=t;n=t.includes("index.html")?t.substring(0,t.indexOf("index.html")+10):t.substring(0,t.lastIndexOf("/")+1);let l="";""!==e&&(l+="s="+e+"&"),"date"!==s.toLowerCase()&&(l+="sb=name&"),"descending"!==u.toLowerCase()&&(l+="o=asc&"),!1!==h&&(l+="f=song&"),""!==l&&(n+=l="?"+l.substring(0,l.length-1)),url2=encodeURI(n),n!=t&&window.history.replaceState("","",n)}function _e(n){if(!G)return;Ve(n);let l,a=function e(){let t=!1;return u!==e.orderBy?t=!0:s!==e.sortBy?t=!0:h!==e.filterSong&&(t=!0),e.orderBy=u,e.sortBy=s,e.filterSong=h,t}();ze(i);let m=[];if(!isNaN(n)&&""!==n&&i.length>=parseInt(n))void 0===_e.prevSearchData&&(oe=!0,T.value=i[parseInt(n)-1].name),m.push(i[parseInt(n)-1]);else{oe=!1,l=void 0!==_e.prevSearch&&n.includes(_e.prevSearch)&&!a?_e.prevSearchData:i;for(let e of l)qe(e,n)&&m.push(e)}_e.prevSearch=n,_e.prevSearchData=m,function(n){for(folder of(ee=!1,r=n,o=[],Oe(n.length),n)){if(o.length===Z)break;if(o.push(folder),!1===folder.rgbset){let e=et(folder.images[0].dominantColorDark);folder.gridItem.firstElementChild.firstElementChild.style.backgroundColor=e,folder.gridItem.firstElementChild.lastElementChild.style.backgroundColor=e,folder.gridItem.lastElementChild.style.backgroundColor=e}}o.length<r.length?v.style.display="flex":v.style.display="none",d=[];for(let e of o)e.images.length>1&&d.push(e);0!==x.childElementCount&&(x.removeChild(E),(E=document.createElement("div")).className="grid",x.insertBefore(E,v));let l=document.createDocumentFragment();for(e of o)l.appendChild(e.gridItem);E.appendChild(l),Pe(),void 0!==t&&clearInterval(t),t=setInterval(Qe,7e3),!0===oe&&ce({currentTarget:E.firstElementChild})}(m)}function je(e){s=e,A.firstElementChild.textContent=s,function(e){let t=S.lastElementChild.firstElementChild.lastElementChild;"Name"===e?(t.children[0].textContent="A-Z",t.children[0].setAttribute("value","Ascending"),t.children[1].textContent="Z-A",t.children[1].setAttribute("value","Descending")):"Date"===e&&(t.children[0].textContent="Newest",t.children[0].setAttribute("value","Descending"),t.children[1].textContent="Oldest",t.children[1].setAttribute("value","Ascending"))}(s);let t=A.firstElementChild.getAttribute("index"),n=A.lastElementChild.firstElementChild.lastElementChild;n.children[t].removeAttribute("checked"),"Date"===s?(A.firstElementChild.setAttribute("index","0"),n.children[0].setAttribute("checked",""),Xe("Descending")):"Name"===s&&(A.firstElementChild.setAttribute("index","1"),n.children[1].setAttribute("checked",""),Xe("Ascending")),_e(T.value)}function Xe(e){u=e;let t=S.firstElementChild.getAttribute("index"),n=S.lastElementChild.firstElementChild.lastElementChild;n.children[t].removeAttribute("checked");let l=0;"Ascending"===u&&(l=1),"Name"===s&&(l=Math.abs(l-1)),S.firstElementChild.setAttribute("index",l),n.children[l].setAttribute("checked",""),S.firstElementChild.textContent=n.children[l].textContent,_e(T.value)}function Ye(e){if(volumeSlider.parentNode.hasAttribute("active2")||!0===Ye.skip)return void(Ye.skip=!1);let t=function(){volumeSlider.onmousedown="",volumeSlider.parentNode.removeAttribute("active2")};window.addClickQueue(t,!0),volumeSlider.onmousedown=function(e){window.removeClickQueue(t);window.addClickQueue(function(e){let n=parseFloat(volumeSlider.offsetHeight),l=Math.max(Math.min(n+(volumeSlider.rect.top-104-e.y),n),0)/n;Ge(l),localStorage.setItem("volume",l),volumeSlider.rect.left<=e.x&&e.x<=volumeSlider.rect.right&&volumeSlider.rect.top-104<=e.y&&e.y<=volumeSlider.rect.bottom&&(Ye.skip=!0),window.addClickQueue(t,!0),window.onmousemove=""},!0),window.onmousemove=Ke;let n=parseFloat(volumeSlider.offsetHeight);Ge(Math.max(Math.min(n+(volumeSlider.rect.top-104-e.y),n),0)/n)},volumeSlider.rect=volumeSlider.getBoundingClientRect(),volumeSlider.parentNode.setAttribute("active2",""),e.stopPropagation()}function Ge(e){Q.volume=e,Y.textContent=Math.round(100*Q.volume)+"%",volumeSlider.firstElementChild.style.height=100*Q.volume+"%",volumeSlider.parentNode.firstElementChild.className=e>.35?"fas fa-volume-up":e>0?"fas fa-volume-down":"fas fa-volume-off"}function Ke(e){let t=parseFloat(volumeSlider.offsetHeight);Ge(Math.max(Math.min(t+(volumeSlider.rect.top-104-e.y),t),0)/t)}function Ze(e){let t=Math.floor(e/60);return(e%=60)<10&&(e="0"+e),t+":"+e}function $e(e){for(let e of a)e.removeAttribute("active");e||(b.firstElementChild.style.willChange="")}function et(e){return"rgb("+e.r+","+e.g+","+e.b+")"}function tt(e){if(void 0!==l)return void 0!==e?e&&e in l?l[e]:{}:l;l={};let t=decodeURIComponent(window.location.href.slice(window.location.href.indexOf("?")+1));return t===decodeURIComponent(window.location.href)?e&&e in l?l[e]:l:(t.split("&").forEach(function(e){let t=e.split("=",2);l[t[0]]=t[1]}),void 0!==e?e&&e in l?l[e]:{}:l)}function nt(){let e=tt(),t=e.sb,n=e.o,l=e.f,i=e.s;ae(l)||"song"===l&&(h=!0,B.setAttribute("checked","")),ae(t)?je("Date"):"name"===t?je("Name"):"date"===t&&je("Date"),ae(n)?Xe("Descending"):"asc"===n?Xe("Ascending"):"desc"===n&&Xe("Descending"),ae(i)||(document.getElementsByClassName("search-field")[0].value=i)}function lt(e){let t=function(){let e=document.createDocumentFragment();e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),e.childNodes[0].className="image-ui-container",e.childNodes[1].className="sixteenbynine";let t=e.childNodes[1];return t.appendChild(document.createElement("img")),t.childNodes[0].className="gallery-image",(t=e.childNodes[0]).appendChild(document.createElement("div")),t.appendChild(document.createElement("div")),t.childNodes[0].className="image-bar",t.childNodes[1].className="image-frame",(t=t.childNodes[0]).appendChild(document.createElement("span")),t.childNodes[0].className="image-title",e}(),n=function(){let e=document.createDocumentFragment();return e.appendChild(document.createElement("img")),e.childNodes[0].className="gallery-image",e}();for(let l of e){let e=t.cloneNode(!0);e.childNodes[1].childNodes[0].onload=Re,e.childNodes[1].childNodes[0].onerror=We,e.childNodes[0].childNodes[0].childNodes[0].textContent=l.name;let o=l.images[0].dominantColor,r=96/(o.r+o.g+o.b);for(img of(l.images[0].dominantColorDark={r:o.r*r,g:o.g*r,b:o.b*r},l.fullName=l.name,void 0!==l.suffix&&(l.fullName+=" - "+l.suffix),l.thumbnailIndex=0,1!=l.images.length&&(e.childNodes[1].appendChild(n.cloneNode(!0)),e.childNodes[1].childNodes[e.childNodes.length-1].onload=Re,e.childNodes[1].childNodes[e.childNodes.length-1].onerror=We),l.images))img.name.startsWith("§")&&(img.name=l.name+img.name.substring(1));l.gridItem=document.createElement("div"),l.gridItem.onclick=ce,l.gridItem.onmouseover=Ue,l.gridItem.onmouseout=De,l.gridItem.className="grid-item",l.gridItem.appendChild(e),l.gridItem.data=l,l.rgbset=!1,i.push(l)}}function it(e){let t=e.currentTarget;t.hasAttribute("checked")?t.removeAttribute("checked"):t.setAttribute("checked",""),"filtersong-select"===t.getAttribute("id")&&(h=t.hasAttribute("checked"),_e(T.value))}function ot(e){let t=e.currentTarget.parentElement.parentElement.parentElement.parentElement,n=e.currentTarget.getAttribute("value");t.removeAttribute("active"),t.firstElementChild.textContent!==e.currentTarget.textContent?("order-select"===t.getAttribute("id")?Xe(n):"sort-select"===t.getAttribute("id")&&je(n),e.stopPropagation()):e.stopPropagation()}function rt(e){e.currentTarget.hasAttribute("active")||(b.firstElementChild.style.willChange="auto",$e(!0),e.currentTarget.setAttribute("active",""),a.push(e.currentTarget),e.stopPropagation())}x=document.getElementsByClassName("main")[0],T=document.getElementsByClassName("search-field")[0],S=document.getElementById("order-select"),A=document.getElementById("sort-select"),B=document.getElementById("filtersong-select"),k=document.getElementsByClassName("explorer")[0],N=document.getElementsByClassName("explorer-box-files")[0],w=document.getElementsByClassName("explorer-box-images")[0],I=document.getElementsByClassName("explorer-loading")[0],E=x.firstElementChild,v=x.lastElementChild,b=document.getElementsByClassName("sidebar")[0],M=document.getElementsByClassName("return-title")[0],D=document.getElementsByClassName("highlight")[0],W=document.getElementsByClassName("highlight-image")[0],R=document.getElementsByClassName("highlight-load")[0],J=document.getElementsByClassName("highlight-image-container")[0],Q=document.getElementsByClassName("highlight-song")[0],P=document.getElementsByClassName("highlight-song-container")[0],V=document.getElementsByClassName("audio-controls-play")[0],_=document.getElementsByClassName("audio-controls-progress")[0],j=document.getElementsByClassName("audio-controls-progress-elapsed")[0],X=document.getElementsByClassName("audio-controls-progress-total")[0],F=document.getElementsByClassName("highlight-song-overlay-type")[0],H=document.getElementsByClassName("highlight-song-overlay-title")[0],z=document.getElementsByClassName("highlight-song-overlay-download")[0],O=document.getElementsByClassName("highlight-image-overlay-download")[0],volumeSlider=document.getElementsByClassName("audio-controls-volume-sliderbg")[0],Y=document.getElementsByClassName("audio-controls-volume-text")[0],nt(),function(){window.onresize=function(){de=parseFloat(getComputedStyle(document.documentElement).fontSize),re=document.documentElement.scrollHeight-3.5*de-2*de,Oe(r.length),Pe(),xe(),"flex"===P.style.display&&(z.offsetHeight<z.parentNode.offsetWidth?z.style.fontSize=.9*z.offsetHeight+"px":z.style.fontSize=.9*z.parentNode.offsetWidth+"px"),"grid"===J.style.display&&(O.style.fontSize=.4*O.parentNode.offsetHeight+"px"),volumeSlider.rect=volumeSlider.getBoundingClientRect()},x.onclick=me,O.onclick=ke,z.onclick=ke,D.onmousedown=fe,V.onmouseover=ye,V.onmouseout=ve,V.onclick=Ne,_.onmousedown=be,volumeSlider.onclick=Ye,M.parentElement.children[1].onclick=Le,B.onclick=it,S.onclick=rt,A.onclick=rt,k.lastElementChild.onclick=fe;let e=document.getElementsByClassName("option-dropdown-item");for(let t=0;t<e.length;t++)e.item(t).onclick=ot;v.firstElementChild.firstElementChild.onclick=function(){let e=x.scrollTop;Je(),requestAnimationFrame(function(){x.scrollTop=e})},T.oninput=function(e){_e(T.value)},T.style.transition="outline 0.15s ease",requestAnimationFrame(function(){B.removeAttribute("noanim")}),window.clickQueue=[],window.onmouseup=function(e){for(let t=clickQueue.length-1;t>=0;t--)clickQueue[t].func(e),!0===clickQueue[t].once&&clickQueue.splice(t,1)},window.addClickQueue=function(e,t="false"){window.clickQueue.push({func:e,once:t})},window.removeClickQueue=function(e){for(let t=clickQueue.length-1;t>=0;t--)if(clickQueue[t].func===e){clickQueue.splice(t,1);break}},window.addClickQueue($e.bind(this,!1)),Q.ontimeupdate=function(e){Ee(),le||(j.textContent=Ze(Math.round(Q.currentTime)))},Q.onloadedmetadata=function(e){X.textContent=Ze(Math.round(Q.duration))};let t=document.createElement("div");""!==t.style.clipPath?ie=!1:(t.style.clipPath="polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%, 0px 0px, 2px 2px, 2px calc(100% - 2px), calc(100% - 2px) calc(100% - 2px), calc(100% - 2px) 2px, 2px 2px)","polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%, 0px 0px, 2px 2px, 2px calc(100% - 2px), calc(100% - 2px) calc(100% - 2px), calc(100% - 2px) 2px, 2px 2px)"!==t.style.clipPath&&(ie=!1))}(),function(){let e=localStorage.getItem("volume");Ge(null!==e?e:.5)}(),document.addEventListener("DOMContentLoaded",async function(){await window.preload,lt(window.folders),clearTimeout(window.spinAdd),document.getElementById("spinner").remove(),G=!0;let e=tt("s");ae(e)?_e(""):_e(e)});
